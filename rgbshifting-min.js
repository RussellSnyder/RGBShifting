(function(e){e.fn.rgbshifting=function(t){this.options=e.extend({image:false,mode:"horizental",radius:"1.25%"},t);if(this.options.image==false)return this;if(typeof this.options.image=="string"){this.imageObj=new Image;var n=this;this.imageObj.onload=function(){n.drawImage()};this.imageObj.src=this.options.image}else{this.imageObj=this.options.image;this.drawImage()}this.drawImage=function(){var e=this.get(0);var t=e.getContext("2d");var n=0;var r=0;var i=this.imageObj.width;var s=this.imageObj.height;if(typeof this.options.radius=="string"){var o=this.options.radius.split("");if(o[o.length-1]=="%"){this.options.radius=this.options.radius.replace("%","")/1;if(this.options.mode=="horizental")this.options.radius=parseInt(i*this.options.radius/100);else this.options.radius=parseInt(s*this.options.radius/100)}}e.setAttribute("width",i);e.setAttribute("height",s);t.drawImage(this.imageObj,n,r,this.imageObj.width,this.imageObj.height,0,0,i,s);var u=t.getImageData(n,r,i,s);var a=u.data;var f=new Array;var l=new Array;for(var c=0;c<s;c++){for(var h=0;h<i;h++){var p=(i*c+h)*4;if(this.options.mode=="horizental"){var d=(i*c+(h+this.options.radius))*4;var v=(i*c+(h+this.options.radius*-1))*4}else{var d=(i*(c+this.options.radius)+h)*4;var v=(i*(c+this.options.radius*-1)+h)*4}f[d]=a[p];f[d+1]=a[p+1];f[d+2]=a[p+2];f[d+3]=a[p+3];l[v]=a[p];l[v+1]=a[p+1];l[v+2]=a[p+2];l[v+3]=a[p+3]}}for(var m=0,g=a.length;m<g;m+=4){if(typeof f[m]!="undefined"){a[m]=f[m];a[m+1]=f[m+1]*.5+a[m+1]*.5;a[m+2]=f[m+2]}if(typeof l[m]!="undefined"){a[m]=l[m]*.5+a[m]*.5;a[m+1]=a[m+1];a[m+2]=l[m+2]}a[m+3]=255}t.putImageData(u,n,r);return true};return this}})(jQuery)